{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO\\\\Downloads\\\\form_pilot_assignment\\\\crud-platform\\\\client\\\\src\\\\components\\\\Login.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Card, Container, Row, Col, Alert } from 'react-bootstrap';\nimport { useAuth } from '../context/AuthContextFixed';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GOOGLE_CLIENT_ID = \"300345994388-bh0uv0j2bvi7nfh7vurl116lkktb4uup.apps.googleusercontent.com\";\nconst Login = () => {\n  _s();\n  const {\n    login,\n    user,\n    loading,\n    error\n  } = useAuth();\n  const navigate = useNavigate();\n  const [authError, setAuthError] = useState(null);\n  useEffect(() => {\n    // Redirect to dashboard if already logged in\n    if (user) {\n      navigate('/dashboard');\n    }\n\n    // Load Google's authentication script\n    const loadGoogleScript = () => {\n      const script = document.createElement('script');\n      script.src = 'https://accounts.google.com/gsi/client';\n      script.async = true;\n      script.defer = true;\n      document.body.appendChild(script);\n      script.onload = () => {\n        initializeGoogleAuth();\n      };\n    };\n    loadGoogleScript();\n  }, [user, navigate]);\n  const initializeGoogleAuth = () => {\n    if (window.google && GOOGLE_CLIENT_ID) {\n      try {\n        // Get the current origin dynamically - this will work in any environment\n        const currentOrigin = window.location.origin;\n        const redirectUri = `${currentOrigin}/auth/callback`;\n        window.google.accounts.id.initialize({\n          client_id: GOOGLE_CLIENT_ID,\n          callback: handleGoogleResponse,\n          auto_select: false,\n          cancel_on_tap_outside: true,\n          ux_mode: 'redirect',\n          redirect_uri: redirectUri\n        });\n        window.google.accounts.id.renderButton(document.getElementById(\"google-signin-button\"), {\n          theme: \"outline\",\n          size: \"large\",\n          width: 280,\n          text: \"signin_with\"\n        });\n        console.log(`Google OAuth initialized with redirect URI: ${redirectUri}`);\n      } catch (error) {\n        console.error('Failed to initialize Google auth:', error);\n        setAuthError('Failed to initialize authentication. Please try again.');\n      }\n    }\n  };\n  const handleGoogleResponse = async response => {\n    try {\n      // In a real application, you would validate this token on your backend\n      if (response.credential) {\n        // For demo purposes, we're just using the credential token directly\n        await login(response.credential);\n        navigate('/dashboard');\n      } else {\n        setAuthError('Authentication failed. Please try again.');\n      }\n    } catch (err) {\n      console.error('Login failed:', err);\n      setAuthError('Authentication failed. Please try again.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      className: \"justify-content-center mt-5\",\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        md: 6,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"shadow-sm\",\n          children: /*#__PURE__*/_jsxDEV(Card.Body, {\n            className: \"p-5\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-center mb-4\",\n              children: \"Sign In\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 15\n            }, this), authError && /*#__PURE__*/_jsxDEV(Alert, {\n              variant: \"danger\",\n              children: authError\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"mb-4\",\n                children: \"Sign in with your Google account to access the CRUD API Platform.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                id: \"google-signin-button\",\n                className: \"d-inline-block mb-3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-muted small mt-4\",\n                children: \"By signing in, you agree to our Terms of Service and Privacy Policy.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n};\n\n// Add TypeScript interface for Google auth\n_s(Login, \"Ig2opZu8c3PvEIw7Njmo9Gzj5F8=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","Card","Container","Row","Col","Alert","useAuth","jsxDEV","_jsxDEV","GOOGLE_CLIENT_ID","Login","_s","login","user","loading","error","navigate","authError","setAuthError","loadGoogleScript","script","document","createElement","src","async","defer","body","appendChild","onload","initializeGoogleAuth","window","google","currentOrigin","location","origin","redirectUri","accounts","id","initialize","client_id","callback","handleGoogleResponse","auto_select","cancel_on_tap_outside","ux_mode","redirect_uri","renderButton","getElementById","theme","size","width","text","console","log","response","credential","err","children","className","md","Body","fileName","_jsxFileName","lineNumber","columnNumber","variant","_c","$RefreshReg$"],"sources":["C:/Users/LENOVO/Downloads/form_pilot_assignment/crud-platform/client/src/components/Login.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Card, Button, Container, Row, Col, Alert } from 'react-bootstrap';\nimport { useAuth } from '../context/AuthContextFixed';\n\nconst GOOGLE_CLIENT_ID = \"300345994388-bh0uv0j2bvi7nfh7vurl116lkktb4uup.apps.googleusercontent.com\";\n\nconst Login: React.FC = () => {\n  const { login, user, loading, error } = useAuth();\n  const navigate = useNavigate();\n  const [authError, setAuthError] = useState<string | null>(null);\n\n  useEffect(() => {\n    // Redirect to dashboard if already logged in\n    if (user) {\n      navigate('/dashboard');\n    }\n\n    // Load Google's authentication script\n    const loadGoogleScript = () => {\n      const script = document.createElement('script');\n      script.src = 'https://accounts.google.com/gsi/client';\n      script.async = true;\n      script.defer = true;\n      document.body.appendChild(script);\n      \n      script.onload = () => {\n        initializeGoogleAuth();\n      };\n    };\n\n    loadGoogleScript();\n  }, [user, navigate]);\n\n  const initializeGoogleAuth = () => {\n    if (window.google && GOOGLE_CLIENT_ID) {\n      try {\n        // Get the current origin dynamically - this will work in any environment\n        const currentOrigin = window.location.origin;\n        const redirectUri = `${currentOrigin}/auth/callback`;\n        \n        window.google.accounts.id.initialize({\n          client_id: GOOGLE_CLIENT_ID,\n          callback: handleGoogleResponse,\n          auto_select: false,\n          cancel_on_tap_outside: true,\n          ux_mode: 'redirect',\n          redirect_uri: redirectUri\n        });\n\n        window.google.accounts.id.renderButton(\n          document.getElementById(\"google-signin-button\")!,\n          { \n            theme: \"outline\", \n            size: \"large\",\n            width: 280,\n            text: \"signin_with\"\n          }\n        );\n        \n        console.log(`Google OAuth initialized with redirect URI: ${redirectUri}`);\n      } catch (error) {\n        console.error('Failed to initialize Google auth:', error);\n        setAuthError('Failed to initialize authentication. Please try again.');\n      }\n    }\n  };\n\n  const handleGoogleResponse = async (response: any) => {\n    try {\n      // In a real application, you would validate this token on your backend\n      if (response.credential) {\n        // For demo purposes, we're just using the credential token directly\n        await login(response.credential);\n        navigate('/dashboard');\n      } else {\n        setAuthError('Authentication failed. Please try again.');\n      }\n    } catch (err) {\n      console.error('Login failed:', err);\n      setAuthError('Authentication failed. Please try again.');\n    }\n  };\n\n  return (\n    <Container>\n      <Row className=\"justify-content-center mt-5\">\n        <Col md={6}>\n          <Card className=\"shadow-sm\">\n            <Card.Body className=\"p-5\">\n              <h1 className=\"text-center mb-4\">Sign In</h1>\n              \n              {authError && (\n                <Alert variant=\"danger\">{authError}</Alert>\n              )}\n              \n              <div className=\"text-center\">\n                <p className=\"mb-4\">Sign in with your Google account to access the CRUD API Platform.</p>\n                \n                <div id=\"google-signin-button\" className=\"d-inline-block mb-3\"></div>\n                \n                <p className=\"text-muted small mt-4\">\n                  By signing in, you agree to our Terms of Service and Privacy Policy.\n                </p>\n              </div>\n            </Card.Body>\n          </Card>\n        </Col>\n      </Row>\n    </Container>\n  );\n};\n\n// Add TypeScript interface for Google auth\ndeclare global {\n  interface Window {\n    google: {\n      accounts: {\n        id: {\n          initialize: (config: any) => void;\n          renderButton: (element: HTMLElement, options: any) => void;\n          prompt: () => void;\n        };\n      };\n    };\n  }\n}\n\nexport default Login; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}